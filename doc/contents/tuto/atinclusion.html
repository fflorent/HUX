<h1>At Inclusion</h1>
<p>At Inclusion is a module that lets you update easily the URL of your users while they are loading new contents via XMLHttpRequests.</p>
<h2>Setting At Inclusions</h2>
<p>In order to make a link that sets the At Inclusion pairs, you have to write the link of this form : </p>
<div class="sandbox">
	&lt;a href="@target1=url1,target2=url2,..."&gt;click me&lt;/a&gt;
</div>
<p>As you can see : </p>
<ul>
	<li>you write a link (or HTML Anchor) and you do not need javascript for that</li>
	<li>the href begins with "@" (At), followed by what we name <i>At Inclusion pairs</i> (or even <i>At Inclusions</i>)</li>
	<li>These <i>At Inclusion pairs</i> are comma-separated</li>
</ul>
<p>An At Inclusion pair is composed of : </p>
<ul>
	<li>a <i>target</i>, which is the id of the HTML Element where the content will be loaded</li>
	<li>an URL, which gives the content to load</li>
</ul>
<p>That example will unset all existing At Inclusions, replace it by "@target1=url1,target2=url2", and inject the content of <i>url1</i> into <i>target1</i>, <i>url2</i> into <i>target2</i> and so on ...</p>
<p>Test it : </p>
<div class="testit">
	<div class="expected">
		<p><a href="@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html">@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html</a> (resets)<br/>
		   <a href="@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html,div1=contents/demos/images/indian.html">@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html,div1=contents/demos/images/indian.html</a><br/>
		   <a href="@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html,div2=contents/demos/images/night_traffic.html">@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html,div2=contents/demos/images/night_traffic.html</a><br/>
		   <a href="@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html,div1=contents/demos/images/indian.html,div2=contents/demos/images/night_traffic.html">@container=contents/tuto.html,tuto=contents/tuto/atinclusion.html,div1=contents/demos/images/indian.html,div2=contents/demos/images/night_traffic.html</a> (loads both)
		</p>
		<div id="div1">I am #div1</div>
		<div id="div2">I am #div2</div>
	</div>
</div>
<h2>Operations with At Inclusions</h2>
<p>Precedently, we had to rewrite the current At Inclusions string for each links.<br/>
   Fortunately, At Inclusions operations (additions or deletions) can be used by the same way we use relative paths for links</p>
<h3>Adding At Inclusions</h3>
<p>To add At Inclusion pairs, use a link of this form : </p>
<div class="sandbox">
	&lt;a href="<b>@+</b>target1=url1,target2=url2,..."&gt;click me&lt;/a&gt;
</div>
<p>If the URL contains an at inclusion pair whose key is <i>target1</i>, the link replaces that pair with "target1=url1". <br/>Otherwise, it adds "target1=url1" at the end of the At Inclusions pairs.</p>
<p>Idem for "target2=url2", and so on...</p>

<h3>Removing At Inclusions</h3>
<p>To remove At Inclusion pairs, use a link of this form : </p>
<div class="sandbox">
	&lt;a href="<b>@-</b>target1,target2,..."&gt;click me&lt;/a&gt;
</div>
<p class="note">NOTE : we only specify keys for deletions</p>
<p>Clicking on that link would delete pairs whose key is either target1, target2, etc. if they exist in the At Inclusion pairs.</p>
<h3>Adding and removing At Inclusions with the same link</h3>
<p>In the same link, you can use both addition and deletion operations, like below : </p>
<div class="sandbox">
	&lt;a href="<b>@+</b>target1=url1,target2=url2,<b>-</b>target3,<b>+</b>target4=url4"&gt;click me&lt;/a&gt;
</div>
<p>In that example, the link will add or replace "target1=url1", "target2=url2", "target4=url4" and remove "target3" to/from the At Inclusion pairs.</p>
<p class="note">You may have noticed that "target2=url2" has no explicit operator. In such case, the last operator is applied ("+" here).</p>
<h3>Test it ! </h3>
<p>Lets do the same thing than precedently, but now with operation : </p>
<div class="testit">
	<div class="expected">
		<p><a href="@-div3,div4">@-div3,div4</a> (resets all)<br/>
		   <a href="@+div3=contents/demos/images/indian.html">@+div3=contents/demos/images/indian.html</a><br/>
		   <a href="@+div4=contents/demos/images/night_traffic.html">@+div4=contents/demos/images/night_traffic.html</a><br/>
		   <a href="@+div3=contents/demos/images/indian.html,div4=contents/demos/images/night_traffic.html">@+div3=contents/demos/images/indian.html,div4=contents/demos/images/night_traffic.html</a> (loads both)
		</p>
		<div id="div3">I am #div3</div>
		<div id="div4">I am #div4</div>
	</div>
</div>
<p>And now, with only one div (instead of two) : </p>
<div class="testit">
	<div class="expected">
		<p><a href="@-div5">@-div5</a> (resets all)<br/>
		   <a href="@+div5=contents/demos/images/indian.html">@+div5=contents/demos/images/indian.html</a><br/>
		   <a href="@+div5=contents/demos/images/night_traffic.html">@+div5=contents/demos/images/night_traffic.html</a>
		</p>
		<div id="div5">I am #div5</div>
	</div>
</div>
<h2>Dealing with nested At Inclusions</h2>
<p>One problem may appear to your eyes : how to load a content (let's name it <i>A</i>) and load another content <i>B</i> which has to be injected in <i>A</i> ?</p>
<p>The At Inclusion module has made the answer simple : if you have a sub-content which depends to a parent-content, the parent-content must be set before the sub-content in the At Inclusions string.</p>
<p>For example, suppose we have : </p>
<ul>
	<li><i>keyA=valueA</i> which does not depend on any other pair</li>
	<li><i>keyB=valueB</i> which does not depend on any other pair either</li>
	<li><i>keyC=valueC</i> which depends on <i>keyA=valueA</i></li>
</ul>
<p>The following At Inclusions are <b>correct</b> : </p>
<ul>
	<li>@keyA=valueA,keyB=valueB,keyC=valueC</li>
	<li>@keyA=valueA,keyC=valueC,keyB=valueB</li>
	<li>@keyB=valueB,keyA=valueA,keyC=valueC</li>
</ul>
<p>and the following are <b>incorrect</b> : </p>
<ul>
	<li>@keyC=valueC,keyB=valueB,keyA=valueA</li>
	<li>@keyC=valueC,keyA=valueA,keyB=valueB</li>
</ul>