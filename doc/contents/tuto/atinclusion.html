<h1>At Inclusion</h1>
<p>At Inclusion is a module that lets you to update your URL while you are loading contents. It stores pairs (named <i>At Inclusions</i>) in the URL, so the loaded contents are retrieved when using this URL.</p>
<p>At Inclusions consists in pairs of [id]=[url] after an '@' (<i>at</i>) in an URL, for example : <br/>http://example.com/mypage.html<b>@target1=url1,target2=url2</b></p>

<!-- TODO : A METTRE DANS FEATURES 
 <p>It uses the <a href="https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries" target="_blank">last history API (pushstate, replacestate)</a> available for Chrome 5+, Firefox 4+, Internet Explorer 10+, Opera 11.5+ and Safari 5.0+</p>
<p>For the older browsers, you are proposed to use <a href="@content=c_features,features=hashmgr">Hash Bangs</a> coupled with <a href="">AtInclusions fallback [URL ?]</a></p>
<p>This table compares the advantages of At Inclusion and Hash Bangs : </p>
<table class="summary">
	<tbody>
		<tr>
			<th>Advantage</th>
			<th>At Inclusion</th>
			<th>Hash Bangs</th>
		</tr>
		<tr>
			<td>URL Update</td>
			<td>yes</td>
			<td>yes</td>
		</tr>
		<tr>
			<td>History management (go backward/forward)</td>
			<td>yes</td>
			<td>yes</td>
		</tr>
		<tr>
			<td>Old browsers compatibility (including IE7)</td>
			<td>yes</td>
			<td>yes <sup>1</sup></td>
		</tr>
		<tr style="font-weight:bold">
			<td>Indexing (Google, Bing, Yahoo...)</td>
			<td>no</td>
			<td >yes with <a href="https://github.com/fflorent/mod_atinclusion" target="_blank">atinclusions Apache module</a> <sup>2</sup> </td>
		</tr>
	</tbody>
</table>
<p><sub>1 : needs AtInclusions fallback</sub><br/><sub>2 : still experimental</sub></p>-->
<h2>Setting At Inclusions</h2>
<p>To set (or replace) At Inclusion pairs, use a link of this form : </p>
<div class="sandbox">
	&lt;a href="@target1=url1,target2=url2,..."&gt;click me&lt;/a&gt;
</div>
<p>That example will unset all existing At Inclusions, replace it by "@target1=url1,target2=url2", and inject the content of <i>url1</i> into <i>target1</i>, <i>url2</i> into <i>target2</i> and so on ...</p>
<p>Test it : </p>
<div class="testit">
	<div class="expected">
		<p><a href="@container=c_tuto,tuto=t_atinclusion">@container=c_tuto,tuto=t_atinclusion</a> (resets)<br/>
		   <a href="@container=c_tuto,tuto=t_atinclusion,div1=di_indian">@container=c_tuto,tuto=t_atinclusion,div1=di_indian</a><br/>
		   <a href="@container=c_tuto,tuto=t_atinclusion,div2=di_night_traffic">@container=c_tuto,tuto=t_atinclusion,div2=di_night_traffic</a><br/>
		   <a href="@container=c_tuto,tuto=t_atinclusion,div1=di_indian,div2=di_night_traffic">@container=c_tuto,tuto=t_atinclusion,div1=di_indian,div2=di_night_traffic</a> (loads both)
		</p>
		<div id="div1">I am #div1</div>
		<div id="div2">I am #div2</div>
	</div>
</div>
<h2>Operations with At Inclusions</h2>
<p>Precedently, we had to rewrite the current At Inclusions string for each links.<br/>
   Fortunately, At Inclusions operations (additions or deletions) can be used by the same way we use relative paths for links</p>
<h3>Adding At Inclusions</h3>
<p>To add At Inclusion pairs, use a link of this form : </p>
<div class="sandbox">
	&lt;a href="<b>@+</b>target1=url1,target2=url2,..."&gt;click me&lt;/a&gt;
</div>
<p>If the URL contains an at inclusion pair whose key is <i>target1</i>, the link replaces that pair with "target1=url1". <br/>Otherwise, it adds "target1=url1" at the end of the At Inclusions pairs.</p>
<p>Idem for "target2=url2", and so on...</p>

<h3>Removing At Inclusions</h3>
<p>To remove At Inclusion pairs, use a link of this form : </p>
<div class="sandbox">
	&lt;a href="<b>@-</b>target1,target2,..."&gt;click me&lt;/a&gt;
</div>
<p class="note">NOTE : we only specify keys for deletions</p>
<p>Clicking on that link would delete pairs whose key is either target1, target2, etc. if they exist in the At Inclusion pairs.</p>
<h3>Adding and removing At Inclusions with the same link</h3>
<p>In the same link, you can use both addition and deletion operations, like below : </p>
<div class="sandbox">
	&lt;a href="<b>@+</b>target1=url1,target2=url2,<b>-</b>target3,<b>+</b>target4=url4"&gt;click me&lt;/a&gt;
</div>
<p>In that example, the link will add or replace "target1=url1", "target2=url2", "target4=url4" and remove "target3" to/from the At Inclusion pairs.</p>
<p class="note">You may have noticed that "target2=url2" has no explicit operator. In such case, the last operator is applied ("+" here).</p>
<h3>Test it ! </h3>
<p>Lets do the same thing than precedently, but now with operation : </p>
<div class="testit">
	<div class="expected">
		<p><a href="@-div3,div4">@-div3,div4</a> (resets all)<br/>
		   <a href="@+div3=di_indian">@+div3=di_indian</a><br/>
		   <a href="@+div4=di_night_traffic">@+div4=di_night_traffic</a><br/>
		   <a href="@+div3=di_indian,div4=di_night_traffic">@+div3=di_indian,div4=di_night_traffic</a> (loads both)
		</p>
		<div id="div3">I am #div3</div>
		<div id="div4">I am #div4</div>
	</div>
</div>
<p>And now, with only one div (instead of two) : </p>
<div class="testit">
	<div class="expected">
		<p><a href="@-div5">@-div5</a> (resets all)<br/>
		   <a href="@+div5=di_indian">@+div5=di_indian</a><br/>
		   <a href="@+div5=di_night_traffic">@+div5=di_night_traffic</a>
		</p>
		<div id="div5">I am #div5</div>
	</div>
</div>
<h2>Dealing with nested At Inclusions</h2>
<p>One problem may appear to your eyes : how to load a content (let's name it <i>A</i>) and load another content <i>B</i> which has to be injected in <i>A</i> ?</p>
<p>The At Inclusion module has made the answer simple : if you have a sub-content which depends to a parent-content, the parent-content must be set before the sub-content in the At Inclusions string.</p>
<p>For example, suppose we have : </p>
<ul>
	<li><i>keyA=valueA</i> which does not depend on any other pair</li>
	<li><i>keyB=valueB</i> which does not depend on any other pair either</li>
	<li><i>keyC=valueC</i> which depends on <i>keyA=valueA</i></li>
</ul>
<p>The following At Inclusions are <b>correct</b> : </p>
<ul>
	<li>@keyA=valueA,keyB=valueB,keyC=valueC</li>
	<li>@keyA=valueA,keyC=valueC,keyB=valueB</li>
	<li>@keyB=valueB,keyA=valueA,keyC=valueC</li>
</ul>
<p>and the following are <b>incorrect</b> : </p>
<ul>
	<li>@keyC=valueC,keyB=valueB,keyA=valueA</li>
	<li>@keyC=valueC,keyA=valueA,keyB=valueB</li>
</ul>